<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:context="http://www.springframework.org/schema/context" xmlns:int="http://www.springframework.org/schema/integration"
	xmlns:int-xmpp-component="http://www.gss.com.tw/schema/integration/xmpp/component" xmlns:rabbit="http://www.springframework.org/schema/rabbit"
	xmlns:int-amqp="http://www.springframework.org/schema/integration/amqp"
	xsi:schemaLocation="http://www.springframework.org/schema/integration/amqp http://www.springframework.org/schema/integration/amqp/spring-integration-amqp.xsd
		http://www.springframework.org/schema/integration http://www.springframework.org/schema/integration/spring-integration.xsd
		http://www.springframework.org/schema/rabbit http://www.springframework.org/schema/rabbit/spring-rabbit.xsd
		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.gss.com.tw/schema/integration/xmpp/component http://www.gss.com.tw/schema/integration/xmpp/component/integration-xmpp-component.xsd
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

	<context:property-placeholder location="classpath:password.properties" />

	<rabbit:connection-factory id="connectionFactory" host="${rabbitmq.host}" username="${rabbitmq.username}"
		password="${rabbitmq.password}" virtual-host="${rabbitmq.vhost.name}" />

	<int-amqp:inbound-channel-adapter connection-factory="connectionFactory" queue-names="${rabbitmq.queue.name}"
		channel="amqp-inbound-channel" />

	<int:channel id="amqp-inbound-channel" />

	<int:transformer input-channel="amqp-inbound-channel" output-channel="message-outbound-channel" ref="jsonToMessage"
		method="convert" />
	<bean id="jsonToMessage" class="com.gss.gmo.cao.integration.xmpp.component.service.relay.JsonToMessage" />

	<int:channel id="message-outbound-channel" />

	<int-xmpp-component:component-manager host="172.16.3.113" port="5275" subdomain="vitals-esp"
		secretKey="gss1234" />

	<int-xmpp-component:message-outbound-channel-adapter channel="message-outbound-channel" />

	<rabbit:template id="rabbitTemplate" connection-factory="connectionFactory" />

	<bean class="org.crsh.spring.SpringBootstrap">
		<property name="config">
			<props>
				<!-- VFS configuration -->
				<prop key="crash.vfs.refresh_period">1</prop>

				<!-- SSH configuration -->
				<prop key="crash.ssh.port">2000</prop>

				<!-- Optional SSH timeouts -->
				<prop key="crash.ssh.auth_timeout">300000</prop>
				<prop key="crash.ssh.idle_timeout">300000</prop>

				<!-- Telnet configuration -->
				<prop key="crash.telnet.port">5000</prop>

				<!-- Authentication configuration -->
				<prop key="crash.auth">simple</prop>
				<prop key="crash.auth.simple.username">admin</prop>
				<prop key="crash.auth.simple.password">admin</prop>
			</props>
		</property>
	</bean>

</beans>
